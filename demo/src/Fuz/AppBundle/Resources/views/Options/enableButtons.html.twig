{% extends 'FuzAppBundle::layout.html.twig' %}

{% block extra_js %}
    <script src="{{ asset('bundles/fuzapp/js/collection/jquery.collection.js') }}"></script>
{% endblock %}

{% block title %}JavaScript options : only allow to move elements{% endblock %}

{% block body %}

    <h2>{{ block('title') }}</h2>

    <p>Use <code>enable_up</code>, <code>enable_down</code>, <code>enable_add</code> and <code>enable_remove</code> options to disable some buttons</p>

    <p>
        Check out this page's
        <a href="https://github.com/ninsuo/symfony2-collection/blob/master/demo/src/Fuz/AppBundle/Controller/OptionsController.php" target="_blank">controller</a>,
        <a href="https://github.com/ninsuo/symfony2-collection/blob/master/demo/src/Fuz/AppBundle/Resources/views/Options/enableButtons.html.twig" target="_blank">view</a>
        and
        <a href="https://github.com/ninsuo/symfony2-collection/blob/master/demo/src/Fuz/AppBundle/Resources/views/Options/enableButtons-theme.html.twig" target="_blank">theme</a>
        to know how to create such form and enable the plugin.
    </p>

    <hr/>

    <form class="form-inline">
      <strong>Enable or disable collection's actions : </strong>
      <div class="checkbox">
         <label>
           <input id="up" class="reload-collection" type="checkbox" checked> Enable Move up
         </label>
       </div>
      <div class="checkbox">
         <label>
           <input id="down"  class="reload-collection" type="checkbox" checked> Enable Move down
         </label>
       </div>
      <div class="checkbox">
         <label>
           <input id="add"  class="reload-collection" type="checkbox" checked> Enable Add
         </label>
       </div>
      <div class="checkbox">
         <label>
           <input id="remove"  class="reload-collection" type="checkbox" checked> Enable Remove
         </label>
       </div>
    </form>

    <br/>

    <div class="row">

       <div class="col-md-6">
          <h3>A simple collection</h3>

          <p>
             If there are no buttons in the form theme (or if there are no form theme), disabling buttons will make them
             not appear on the form collection.
          </p>

             {{ form(form) }}

            {% for value in formData.values %}
                <p>Value : {{ value }}</p>
            {% endfor %}

       </div>
       <div class="col-md-6">
          <h3>A themed collection</h3>

          <p>
             On a themed collection with custom buttons, disabling an action will just disable the functionnality, but will not
             make the button disappear. That's up to you to avoid adding buttons in the theme if you don't want to render them.
          </p>

            {% form_theme advancedForm 'FuzAppBundle:Options:enableButtons-theme.html.twig' %}

            {{ form(advancedForm) }}

            {% for value in advancedFormData.values %}
                <p>Value : {{ value }}</p>
            {% endfor %}

       </div>

    </div>

    <hr/>

{% endblock %}

{% block script %}

    <script type="text/javascript">

      function reloadCollectionButtons() {
        $('.form-collection, .advancedForm-collection').collection({
           enable_up: $('#up').is(':checked'),
           enable_down: $('#down').is(':checked'),
           enable_add: $('#add').is(':checked'),
           enable_remove: $('#remove').is(':checked')
        });
      }

      reloadCollectionButtons();

      $('.reload-collection').click(function() {
         reloadCollectionButtons();
      });

    </script>

{% endblock %}